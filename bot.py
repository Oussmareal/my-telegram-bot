from telethon import TelegramClient, events

# âœ… Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
api_id = 26037708  # Ø§Ø³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ù€ API ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
api_hash = '769da9951dfadb6113f3afbf33209d4d'  # Ø§Ø³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ù€ API HASH Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ

# âœ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©
client = TelegramClient('multi_group_bot', api_id, api_hash)

# âœ… Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø°ÙŠ Ø³ÙŠØµÙ„Ù‡ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø£Ùˆ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨ÙˆØª
admin_user_id = 6747574207  

# âœ… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…ØµØ¯Ø± ÙˆØ§Ù„Ù‡Ø¯Ù
source_groups = [-4658871439, -1002035975495]  # Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…ØµØ¯Ø±
target_groups = [-1002479735760, -1002479735760]  # Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù‡Ø¯Ù

async def send_admin_notification(message):
    """Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø£Ùˆ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨ÙˆØª"""
    try:
        await client.send_message(admin_user_id, message)
    except Exception as e:
        print(f"âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±: {e}")

@client.on(events.NewMessage(chats=source_groups))  
async def forward_message(event):
    """ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª"""
    for target in target_groups:
        try:
            if event.message.text:  # Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ©
                await client.send_message(target, event.message.text)
            elif event.message.media:  # Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙˆØ³Ø§Ø¦Ø·
                await client.send_file(target, event.message.media)
            print(f"âœ… ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ù† {event.chat_id} Ø¥Ù„Ù‰ {target}")
        except Exception as e:
            print(f"âŒ ÙØ´Ù„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ {target}: {e}")

async def main():
    """ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª"""
    print("ğŸš€ Ø§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† ÙˆÙŠÙ†ØªØ¸Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„...")
    await send_admin_notification("ğŸš€ Ø§Ù„Ø¨ÙˆØª Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!")
    await client.run_until_disconnected()

try:
    with client:
        client.loop.run_until_complete(main())
except KeyboardInterrupt:
    print("â›” ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨ÙˆØª ÙŠØ¯ÙˆÙŠÙ‹Ø§.")
    client.loop.run_until_complete(send_admin_notification("â›” Ø§Ù„Ø¨ÙˆØª ØªÙ… Ø¥ÙŠÙ‚Ø§ÙÙ‡ ÙŠØ¯ÙˆÙŠÙ‹Ø§!"))
except Exception as e:
    print(f"âŒ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: {e}")
    client.loop.run_until_complete(send_admin_notification(f"âŒ Ø§Ù„Ø¨ÙˆØª ØªÙˆÙ‚Ù Ø¨Ø³Ø¨Ø¨ Ø®Ø·Ø£: {e}"))
